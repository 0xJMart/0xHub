worker_processes  1;

events {
  worker_connections  1024;
}

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  sendfile        on;
  keepalive_timeout  65;

  server_tokens off;

  server {
    listen       80;
    listen  [::]:80;
    server_name  _;

    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Content-Security-Policy "default-src 'self'; img-src 'self' data: blobs:; style-src 'self' 'unsafe-inline'; script-src 'self'; font-src 'self' data:;" always;

    root   /usr/share/nginx/html;
    index  index.html;

    location / {
      try_files $uri $uri/ /index.html;
    }

    location = /healthz {
      access_log off;
      add_header Content-Type application/json;
      return 200 '{"status":"ok"}';
    }
  }
}

